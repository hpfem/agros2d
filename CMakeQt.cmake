# Add QT.
SET(CMAKE_AUTOMOC TRUE)
IF(WITH_QT5)
    IF(WIN32)
        SET(CMAKE_PREFIX_PATH "C:\\Qt\\Qt5.0.2\\5.0.2\\msvc2010_opengl\\")
    ELSE(WIN32)

    ENDIF(WIN32)
    FIND_PACKAGE(Qt5Core)
    FIND_PACKAGE(Qt5Gui)
    FIND_PACKAGE(Qt5OpenGL)
    FIND_PACKAGE(Qt5PrintSupport)
    FIND_PACKAGE(Qt5Svg)
    FIND_PACKAGE(Qt5Network)
    FIND_PACKAGE(Qt5Widgets)    
    FIND_PACKAGE(Qt5WebKit)
    FIND_PACKAGE(Qt5WebKitWidgets)
    FIND_PACKAGE(Qt5Xml)
    FIND_PACKAGE(Qt5XmlPatterns)
    FIND_PACKAGE(Qt5UiTools)
ELSE(WITH_QT5)
    SET(QT_USE_QTOPENGL TRUE)
    SET(QT_USE_QTUITOOLS TRUE)
    SET(QT_USE_QTNETWORK TRUE)
    SET(QT_USE_QTOPENGL TRUE)
    SET(QT_USE_QTSQL TRUE)
    SET(QT_USE_QTXML TRUE)
    SET(QT_USE_QTSVG TRUE)
    SET(QT_USE_QTTEST TRUE)
    SET(QT_USE_QTDBUS TRUE)
    SET(QT_USE_QTSCRIPT TRUE)
    SET(QT_USE_QTWEBKIT TRUE)
    SET(QT_USE_QTXMLPATTERNS TRUE)
    FIND_PACKAGE(Qt4 REQUIRED)
    # This has to be here, otherwise CMake will not do the magic and will not link to OpenGL
    FIND_PACKAGE(OpenGL REQUIRED)
    INCLUDE(${QT_USE_FILE})
    ADD_DEFINITIONS(${QT_DEFINITIONS})
ENDIF(WITH_QT5)
