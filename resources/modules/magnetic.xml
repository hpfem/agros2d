<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<module:module xmlns:module="XMLModule" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="XMLModule ../xsd/module_xml.xsd">

  <module:general id="magnetic" name="Magnetic field">
    <module:description>Magnetic field ...</module:description>
    <module:analyses>
      <module:analysis id="steadystate" name="Steady state" solutions="1" type="steadystate">
        <module:field_config>
          <field_item field_key="NewtonDampingCoeff" field_value="0.8"/>
          <field_item field_key="NewtonAutomaticDampingCoeff" field_value="0.8"/>
        </module:field_config>
      </module:analysis>
      <module:analysis id="harmonic" name="Harmonic" solutions="4" type="harmonic">
      </module:analysis>
      <module:analysis id="transient" name="Transient" solutions="2" type="transient">
      </module:analysis>
    </module:analyses>
  </module:general>

  <module:constants>
  <module:constant id="MU0" value="1.2566371e-06"/>
  <module:constant id="SMALL" value="1e-5"/>
  </module:constants>

  <module:spaces>
    <module:space analysistype="steadystate">
      <module:space_config i="1" orderadjust="0" type="h1"/>
    </module:space>
    <module:space analysistype="harmonic">
      <module:space_config i="1" orderadjust="0" type="h1"/>
      <module:space_config i="2" orderadjust="0" type="h1"/>
      <module:space_config i="3" orderadjust="0" type="const"/>
      <module:space_config i="4" orderadjust="0" type="const"/>
    </module:space>
    <module:space analysistype="transient">
      <module:space_config i="1" orderadjust="0" type="h1"/>
      <module:space_config i="2" orderadjust="0" type="h1"/>
    </module:space>
  </module:spaces>

  <module:volume>
    <module:quantity id="magnetic_permeability" shortname="ma_mur"/>
    <module:quantity id="magnetic_conductivity" shortname="ma_gamma"/>
    <module:quantity id="magnetic_remanence" shortname="mu_Brm"/>
    <module:quantity id="magnetic_remanence_angle" shortname="ma_Bra"/>
    <module:quantity id="magnetic_velocity_x" shortname="ma_vx"/>
    <module:quantity id="magnetic_velocity_y" shortname="ma_vy"/>
    <module:quantity id="magnetic_velocity_angular" shortname="ma_va"/>
    <module:quantity id="magnetic_current_density_external_real" shortname="ma_Jer"/>
    <module:quantity id="magnetic_current_density_external_imag" shortname="ma_Jei"/>
    <module:quantity id="magnetic_total_current_prescribed" shortname="ma_IPrescribed"/>
    <module:quantity id="magnetic_total_current_real" shortname="ma_Itr"/>
    <module:quantity id="magnetic_total_current_imag" shortname="ma_Iti"/>

    <module:function id="magnetic_func_current_density_external_real_complete" shortname="ma_Jer_compl" type="constant">
      <module:quantity id="magnetic_current_density_external_real"/>
      <module:quantity id="magnetic_total_current_prescribed"/>
      <module:quantity id="magnetic_total_current_real"/>
<!--      todo: get rid of "this->" in the following (why inherited class needs it to acces ancestors field?-->
      <module:function_variant expr="(1-ma_IPrescribed) * ma_Jer + ma_IPrescribed * ma_Itr / this->area"/>
    </module:function>

    <module:matrix_form id="steady_laplace" i="1" j="1" planar="1 / (ma_mur * MU0) * (udx * vdx + udy * vdy)" axi="1 / (ma_mur * MU0) * ((udr * vdr + udz * vdz) + uval * vdr / r)"/>
    <module:matrix_form id="steady_velocity" i="1" j="1" planar="- ma_gamma * uval * ((ma_vx - y * ma_va) * vdx + (ma_vy + x * ma_va) * vdy)" axi="- ma_gamma * uval * ma_vy * vdz"/>
    <module:matrix_form id="steady_jac_laplace" i="1" j="1" planar="tern((updx * updx + updy * updy) > 0, (- dma_mur / (MU0 * ma_mur * ma_mur) * (updx * udx + updy * udy) / sqrt(updx * updx + updy * updy) * (updx * vdx + updy * vdy)), 0.0)" axi="tern(((updr + upval / r) * (updr + upval / r) + updz * updz) > 0, (- dma_mur / (MU0 * ma_mur * ma_mur) * ((updr + upval / r) * (udr + uval / r) + updz * udz) / ((updr + upval / r)^2 + updz * updz)^0.5 * (updr * vdr + updz * vdz + upval * vdr / r)), 0.0)"/>

    <module:vector_form  id="steady_rhs_remanence" i="1" j="1" planar="mu_Brm / (ma_mur * MU0) * (- sin((ma_Bra/180*PI)) * vdx + cos((ma_Bra/180*PI)) * vdy)" axi="- mu_Brm / (ma_mur * MU0) * (- sin((ma_Bra/180*PI)) * vdr + cos((ma_Bra/180*PI)) * vdz)"/>
    <module:vector_form  id="steady_rhs_current" i="1" j="1" planar="ma_Jer_compl * vval " axi="ma_Jer_compl * vval"/>
    <module:vector_form  id="transient_rhs_current" i="1" j="1" planar="ma_Jer * vval " axi="ma_Jer * vval"/>

    <module:matrix_form id="transient_mat_1_2" i="1" j="2" planar="ma_gamma * uval * vval" axi="ma_gamma * uval * vval" />
    <module:matrix_form id="transient_mat_2_2" i="2" j="2" planar="- uval * vval" axi="- uval * vval" symmetric="1"/>
    <module:matrix_form id="transient_mat_2_1" i="2" j="1" planar="timedermat * uval * vval" axi="timedermat * uval * vval"/>
    <module:vector_form id="transient_vec_2_1" i="2" j="1" planar="timedervec * vval" axi="timedervec * vval"/>

    <!-- TODO: replace value1 with value1+value3 in nonlinear form?????-->
    <module:matrix_form  id="harmonic_laplace_1_1" i="1" j="1" planar="1 / (ma_mur * MU0) * (udx * vdx + udy * vdy)" axi="1 / (ma_mur * MU0) * (udr * vdr + udz * vdz + uval * vdr / r)"/>

    <!-- TODO: lisi se clen u axi. Jeden z jakobianu (1,1) nebo (2,2) je spatne!!!-->
    <module:matrix_form  id="harmonic_jac_laplace_1_1" i="1" j="1" planar="tern((dx1*dx1 + dy1*dy1 + dx2*dx2 + dy2*dy2) > 0, ( - dma_mur / (ma_mur * ma_mur * MU0) * (updx * udx + updy * udy) / sqrt(dx1*dx1 + dy1*dy1 + dx2*dx2 + dy2*dy2) * (updx * vdx + updy * vdy)), 0)" axi="tern((((dr1+value1/r)^2) + dz1*dz1 + (dr2+value2/r)^2 + dz2*dz2) > 0,( - dma_mur / (MU0 * ma_mur * ma_mur) * ((updr + upval / r) * (udr + uval / r) + updz * udz) / sqrt(((dr1+value1/r)^2) + dz1*dz1 + ((dr2+value2/r))^2 + dz2*dz2) * (updr * vdr + updz * vdz + upval * vdr / r)), 0)" />

    <module:matrix_form id="harmonic_laplace_2_2" i="2" j="2" planar="1 / (ma_mur * MU0) * (udx * vdx + udy * vdy)" axi="1 / (ma_mur * MU0) * (udr * vdr + udz * vdz + uval * vdr / r)" />

    <!-- TODO: lisi se clen u axi. Jeden z jakobianu (1,1) nebo (2,2) je spatne!!!-->
    <module:matrix_form id="harmonic_jac_laplace_2_2" i="2" j="2" planar="tern((dx1*dx1 + dy1*dy1 + dx2*dx2 + dy2*dy2) > 0, ( - dma_mur / (ma_mur * ma_mur * MU0) * (updx * udx + updy * udy) / sqrt(dx1*dx1 + dy1*dy1 + dx2*dx2 + dy2*dy2) * (updx * vdx + updy * vdy)), 0)" axi="tern((((dr1+value1/r)^2) + dz1*dz1 + (dr2+value2/r)^2 + dz2*dz2) > 0, dma_mur * (((dr1+value1/r)^2) + dz1*dz1 + ((dr2+value2/r)^2) + dz2*dz2) * ( - dma_mur / (MU0 * ma_mur * ma_mur) * ((updr + upval / r) * (udr + uval / r) + updz * udz) / sqrt(((dr1+value1/r)^2) + dz1*dz1 + ((dr2+value2/r)^2) + dz2*dz2) * (updr * vdr + updz * vdz + upval * vdr / r)), 0)"/>

    <module:matrix_form id="harmonic_velocity_1_1" i="1" j="1" planar="- ma_gamma * uval * ((ma_vx - y * ma_va) * vdx + (ma_vy + x * ma_va) * vdy)" axi="- ma_gamma * uval * ma_vy * vdz"/>
    <module:matrix_form id="harmonic_velocity_2_2" i="2" j="2" planar="- ma_gamma * uval * ((ma_vx - y * ma_va) * vdx + (ma_vy + x * ma_va) * vdy)" axi="- ma_gamma * uval * ma_vy * vdz" />
    <module:matrix_form id="harmonic_gamma_1_2" i="1" j="2" planar="- 2 * PI * f * ma_gamma * uval * vval" axi="- 2 * PI * f * ma_gamma * uval * vval" />
    <module:matrix_form id="harmonic_gamma_2_1" i="2" j="1" planar="2 * PI * f * ma_gamma * uval * vval" axi="2 * PI * f * ma_gamma * uval * vval" />

    <module:matrix_form id="harmonic_current_1_4" i="1" j="4" planar="- 2 * PI * f * ma_gamma * ma_IPrescribed * uval * vval" axi="- 2 * PI * f * ma_gamma * ma_IPrescribed * uval * vval / (2 * PI*(r+1e-12))"/>
    <module:matrix_form id="harmonic_current_2_3" i="2" j="3" planar="2 * PI * f * ma_gamma * ma_IPrescribed * uval * vval" axi="2 * PI * f * ma_gamma * ma_IPrescribed * uval * vval / (2 * PI*(r+1e-12))"/>
    <module:matrix_form id="harmonic_current_3_1" i="3" j="1" planar="-2 * PI * f * ma_gamma * ma_IPrescribed * uval" axi="-2 * PI * f * ma_gamma * ma_IPrescribed * uval"/>
    <module:matrix_form id="harmonic_current_4_2" i="4" j="2" planar="2 * PI * f * ma_gamma * ma_IPrescribed * uval" axi="2 * PI * f * ma_gamma * ma_IPrescribed * uval" />
    <module:matrix_form id="harmonic_current_3_3" i="3" j="3" planar="tern(ma_IPrescribed > 0, -2 * PI * f * ma_gamma * uval, 1)" axi="tern(ma_IPrescribed > 0, -2 * PI * f * ma_gamma * uval/(2*PI*(r+1e-12)), 1)"/>
    <module:matrix_form id="harmonic_current_4_4" i="4" j="4" planar="tern(ma_IPrescribed > 0, 2 * PI * f * ma_gamma * uval, 1)" axi="tern(ma_IPrescribed > 0, 2 * PI * f * ma_gamma * uval/(2*PI*(r+1e-12)), 1)"/>

    <module:vector_form id="harmonic_rhs_1_1" i="1" j="1" planar="ma_Jer * vval + mu_Brm / (ma_mur * MU0) * (- sin((ma_Bra/180*PI)) * vdx + cos((ma_Bra/180*PI)) * vdy)" axi="ma_Jer * vval - mu_Brm / (ma_mur * MU0) * (- sin((ma_Bra/180*PI)) * vdr + cos((ma_Bra/180*PI)) * vdz)"/>
    <module:vector_form id="harmonic_rhs_2_2" i="2" j="2" planar="ma_Jei * vval" axi="ma_Jei * vval"/>

    <module:vector_form id="harmonic_vec_current_3_3" i="3" j="3" planar="ma_IPrescribed * (ma_Iti / area - ma_Jei)" axi="ma_IPrescribed * (ma_Iti / area - ma_Jei)" />
    <module:vector_form id="harmonic_vec_current_4_4" i="4" j="4" planar="ma_IPrescribed * (ma_Itr / area - ma_Jer)" axi="ma_IPrescribed * (ma_Itr / area - ma_Jer)" />


    <module:weakforms_volume>
      <module:weakform_volume analysistype="steadystate" equation="\curl \left( \frac{1}{\mu}\, \left( \curl \vec{A} - \vec{B}_\mathrm{r} \right) \right) - \sigma \vec{v} \times \curl \vec{A} = \vec{J}_\mathrm{ext}">
        <module:quantity id="magnetic_permeability" nonlinearity_axi="sqrt(dz1*dz1 + (dr1 + value1 / r)*(dr1 + value1 / r))" nonlinearity_planar="sqrt(dx1*dx1 + dy1*dy1)"/>
        <module:quantity id="magnetic_conductivity"/>
        <module:quantity id="magnetic_remanence"/>
        <module:quantity id="magnetic_remanence_angle"/>
        <module:quantity id="magnetic_velocity_x"/>
        <module:quantity id="magnetic_velocity_y"/>
        <module:quantity id="magnetic_velocity_angular"/>
        <module:quantity id="magnetic_current_density_external_real"/>
        <module:quantity id="magnetic_total_current_prescribed"/>
        <module:quantity id="magnetic_total_current_real"/>

        <module:linearity_option type="linear">
          <module:matrix_form id="steady_laplace"/>
          <module:matrix_form id="steady_velocity"/>
          <module:vector_form  id="steady_rhs_remanence"/>
          <module:vector_form  id="steady_rhs_current"/>
        </module:linearity_option>

        <module:linearity_option type="newton">
          <module:matrix_form id="steady_laplace"/>
          <module:matrix_form id="steady_velocity"/>
          <module:matrix_form id="steady_jac_laplace"/>
          <module:vector_form id="steady_rhs_remanence" coefficient="-1"/>
          <module:vector_form id="steady_rhs_current" coefficient="-1"/>
          <module:vector_form id="steady_laplace" variant="residual"/>
          <module:vector_form id="steady_velocity" variant="residual"/>
        </module:linearity_option>

      </module:weakform_volume>
      <module:weakform_volume analysistype="transient" equation="\curl \left( \frac{1}{\mu}\, \left( \curl \vec{A} - \vec{B}_\mathrm{r} \right) \right) - \sigma \vec{v} \times \curl \vec{A} + \sigma \frac{\partial \vec{A}}{\partial t} = \vec{J}_\mathrm{ext}">
        <module:quantity id="magnetic_permeability" nonlinearity_axi="sqrt(dz1*dz1 + (dr1 + value1 / r)*(dr1 + value1 / r))" nonlinearity_planar="sqrt(dx1*dx1 + dy1*dy1)"/>
        <module:quantity id="magnetic_conductivity"/>
        <module:quantity id="magnetic_remanence"/>
        <module:quantity id="magnetic_remanence_angle"/>
        <module:quantity id="magnetic_velocity_x"/>
        <module:quantity id="magnetic_velocity_y"/>
        <module:quantity id="magnetic_velocity_angular"/>
        <module:quantity dependence="time" id="magnetic_current_density_external_real"/>
        <module:quantity id="magnetic_total_current_prescribed"/>
        <module:quantity dependence="time" id="magnetic_total_current_real"/>

        <module:linearity_option type="linear">
          <module:matrix_form id="steady_laplace"/>
          <module:matrix_form id="steady_velocity"/>
          <module:matrix_form id="transient_mat_1_2"/>
          <module:matrix_form id="transient_mat_2_2"/>
          <module:matrix_form id="transient_mat_2_1"/>
          <module:vector_form  id="steady_rhs_remanence"/>
          <module:vector_form  id="transient_rhs_current"/>
          <module:vector_form id="transient_vec_2_1"/>
        </module:linearity_option>

      </module:weakform_volume>
      <module:weakform_volume analysistype="harmonic" equation="\curl \left( \frac{1}{\mu}\, \left( \curl \vecfaz{A} - \vec{B}_\mathrm{r} \right) \right) - \sigma \vec{v} \times \curl \vecfaz{A} + \mj \omega \sigma \vecfaz{A} = \vec{J}_\mathrm{ext}">
        <module:quantity id="magnetic_permeability" nonlinearity_axi="sqrt((dr1+tern(r > 0, (value1+value3)/r, 0.0))^2 + dz1*dz1 + (dr2+tern(r > 0, (value2+value4)/r, 0.0))^2 + dz2*dz2)" nonlinearity_planar="sqrt(dx1*dx1 + dy1*dy1 + dx2*dx2 + dy2*dy2)"/>
        <module:quantity id="magnetic_conductivity"/>
        <module:quantity id="magnetic_remanence"/>
        <module:quantity id="magnetic_remanence_angle"/>
        <module:quantity id="magnetic_velocity_x"/>
        <module:quantity id="magnetic_velocity_y"/>
        <module:quantity id="magnetic_velocity_angular"/>
        <module:quantity id="magnetic_current_density_external_real"/>
        <module:quantity id="magnetic_current_density_external_imag"/>
        <module:quantity id="magnetic_total_current_prescribed"/>
        <module:quantity id="magnetic_total_current_real"/>
        <module:quantity id="magnetic_total_current_imag"/>

        <module:linearity_option type="linear">
          <module:matrix_form id="harmonic_laplace_1_1"/>
          <module:matrix_form id="harmonic_laplace_2_2"/>

          <module:matrix_form id="harmonic_velocity_1_1"/>
          <module:matrix_form id="harmonic_velocity_2_2"/>
          <module:matrix_form id="harmonic_gamma_1_2"/>
          <module:matrix_form id="harmonic_gamma_2_1"/>

          <module:matrix_form id="harmonic_current_1_4"/>
          <module:matrix_form id="harmonic_current_2_3"/>
          <module:matrix_form id="harmonic_current_3_1"/>
          <module:matrix_form id="harmonic_current_4_2"/>
          <module:matrix_form id="harmonic_current_3_3"/>
          <module:matrix_form id="harmonic_current_4_4"/>

          <module:vector_form id="harmonic_rhs_1_1"/>
          <module:vector_form id="harmonic_rhs_2_2"/>
          <module:vector_form id="harmonic_vec_current_3_3"/>
          <module:vector_form id="harmonic_vec_current_4_4"/>
        </module:linearity_option>

          <module:linearity_option type="newton">
          <module:matrix_form id="harmonic_laplace_1_1"/>
          <module:matrix_form id="harmonic_jac_laplace_1_1"/>
          <module:matrix_form id="harmonic_laplace_2_2"/>
          <module:matrix_form id="harmonic_jac_laplace_2_2"/>

          <module:matrix_form id="harmonic_velocity_1_1"/>
          <module:matrix_form id="harmonic_velocity_2_2"/>
          <module:matrix_form id="harmonic_gamma_1_2"/>
          <module:matrix_form id="harmonic_gamma_2_1"/>

          <module:matrix_form id="harmonic_current_1_4"/>
          <module:matrix_form id="harmonic_current_2_3"/>
          <module:matrix_form id="harmonic_current_3_1"/>
          <module:matrix_form id="harmonic_current_4_2"/>
          <module:matrix_form id="harmonic_current_3_3"/>
          <module:matrix_form id="harmonic_current_4_4"/>

          <module:vector_form id="harmonic_rhs_1_1" coefficient="-1"/>
          <module:vector_form id="harmonic_rhs_2_2" coefficient ="-1"/>
          <module:vector_form id="harmonic_vec_current_3_3" coefficient ="-1"/>
          <module:vector_form id="harmonic_vec_current_4_4" coefficient ="-1"/>

          <module:vector_form id="harmonic_laplace_1_1" variant="residual"/>
          <module:vector_form id="harmonic_laplace_2_2" variant="residual"/>
          <module:vector_form id="harmonic_velocity_1_1" variant="residual"/>
          <module:vector_form id="harmonic_velocity_2_2" variant="residual"/>
          <module:vector_form id="harmonic_gamma_1_2" variant="residual"/>
          <module:vector_form id="harmonic_gamma_2_1" variant="residual"/>

<!--          <module:matrix_form id="harmonic_current_1_4" variant="residual"/>
          <module:matrix_form id="harmonic_current_2_3" variant="residual"/>
          <module:matrix_form id="harmonic_current_3_1" variant="residual"/>
          <module:matrix_form id="harmonic_current_4_2" variant="residual"/>
          <module:matrix_form id="harmonic_current_3_3" variant="residual"/>
          <module:matrix_form id="harmonic_current_4_4" variant="residual"/>-->
        </module:linearity_option>

      </module:weakform_volume>
    </module:weakforms_volume>
  </module:volume>

  <module:surface>
    <module:quantity id="magnetic_potential_real" shortname="Ar"/>
    <module:quantity id="magnetic_potential_imag" shortname="Ai"/>
    <module:quantity id="magnetic_surface_current_real" shortname="Jr"/>
    <module:quantity id="magnetic_surface_current_imag" shortname="Ji"/>

    <module:essential_form id="steady_essential" i="1" axi="Ar" planar="Ar"/>
    <module:vector_form id="steady_current" i="1" j="1" axi="-Jr * vval" planar="-Jr * vval"/>
    <module:essential_form id="harmonic_essential_1" i="1" axi="Ar" planar="Ar"/>
    <module:essential_form id="harmonic_essential_2" i="2" axi="Ai" planar="Ai"/>
    <module:vector_form id="harmonic_current_1" i="1" j="1" axi="-Jr * vval" planar="-Jr * vval"/>
    <module:vector_form id="harmonic_current_2" i="2" j="2" axi="-Ji * vval" planar="-Ji * vval"/>

    <module:weakforms_surface>
      <module:weakform_surface analysistype="steadystate" default="magnetic_potential">
        <module:boundary equation="A = A_0" id="magnetic_potential" name="Magnetic potential">
          <module:quantity dependence="space" id="magnetic_potential_real"/>

          <module:linearity_option type="linear">
            <module:essential_form id="steady_essential"/>
          </module:linearity_option>

          <module:linearity_option type="newton">
            <module:essential_form id="steady_essential"/>
          </module:linearity_option>
        </module:boundary>

        <module:boundary equation="K = - \frac{1}{\mu} \frac{\partial A}{\partial n_0} = K_0" id="magnetic_surface_current" name="Surface current">
          <module:quantity id="magnetic_surface_current_real"/>

          <module:linearity_option type="linear">
            <module:vector_form id="steady_current"/>
          </module:linearity_option>

          <module:linearity_option type="newton">
            <module:vector_form id="steady_current" coefficient="-1"/>
          </module:linearity_option>
        </module:boundary>
      </module:weakform_surface>

      <module:weakform_surface analysistype="transient" default="magnetic_potential">
        <module:boundary equation="A = A_0" id="magnetic_potential" name="Magnetic potential">
          <module:quantity dependence="space" id="magnetic_potential_real"/>

          <module:linearity_option type="linear">
            <module:essential_form id="steady_essential"/>
          </module:linearity_option>

          <module:linearity_option type="newton">
            <module:essential_form id="steady_essential"/>
          </module:linearity_option>
        </module:boundary>

        <module:boundary equation="K = - \frac{1}{\mu} \frac{\partial A}{\partial n_0} = K_0" id="magnetic_surface_current" name="Surface current">
          <module:quantity id="magnetic_surface_current_real"/>

          <module:linearity_option type="linear">
            <module:vector_form id="steady_current"/>
          </module:linearity_option>

          <module:linearity_option type="newton">
            <module:vector_form id="steady_current" coefficient="-1"/>
          </module:linearity_option>
        </module:boundary>
      </module:weakform_surface>

      <module:weakform_surface analysistype="harmonic" default="magnetic_potential">
        <module:boundary equation="\vecfaz{A} = \vecfaz{A}_0" id="magnetic_potential" name="Magnetic potential">
          <module:quantity dependence="space" id="magnetic_potential_real"/>
          <module:quantity dependence="space" id="magnetic_potential_imag"/>

          <module:linearity_option type="linear">
            <module:essential_form id="harmonic_essential_1"/>
            <module:essential_form id="harmonic_essential_2"/>
          </module:linearity_option>

          <module:linearity_option type="newton">
          <module:essential_form id="harmonic_essential_1"/>
          <module:essential_form id="harmonic_essential_2"/>
          </module:linearity_option>
        </module:boundary>

        <module:boundary equation="\faz{K} = - \frac{1}{\mu} \frac{\partial \vecfaz{A}}{\partial n_0} = \faz{K}_0" id="magnetic_surface_current" name="Surface current">
          <module:quantity id="magnetic_surface_current_real"/>
          <module:quantity id="magnetic_surface_current_imag"/>

          <module:linearity_option type="linear">
            <module:vector_form id="harmonic_current_1"/>
            <module:vector_form id="harmonic_current_2"/>
          </module:linearity_option>

          <module:linearity_option type="newton">
            <module:vector_form id="harmonic_current_1" coefficient="-1"/>
            <module:vector_form id="harmonic_current_2" coefficient="-1"/>
          </module:linearity_option>
        </module:boundary>
      </module:weakform_surface>
    </module:weakforms_surface>
  </module:surface>

  <module:error_calculator>
        <module:calculator id="l2" name="L2 norm">
            <module:expression analysistype="steadystate" axi="(uval * vval)"
                                                          planar="(uval * vval)"/>
            <module:expression analysistype="harmonic" axi="(uval * vval)"
                                                       planar="(uval * vval)"/>
            <module:expression analysistype="transient" axi="(uval * vval)"
                                                        planar="(uval * vval)"/>
        </module:calculator>
        <module:calculator id="h1" name="H1 norm">
            <module:expression analysistype="steadystate" axi="(uval * vval + udr * vdr + udz * vdz)"
                                                          planar="(uval * vval + udx * vdx + udy * vdy)"/>
            <module:expression analysistype="harmonic" axi="(uval * vval + udr * vdr + udz * vdz)"
                                                       planar="(uval * vval + udx * vdx + udy * vdy)"/>
            <module:expression analysistype="transient" axi="(uval * vval + udr * vdr + udz * vdz)"
                                                        planar="(uval * vval + udx * vdx + udy * vdy)"/>
        </module:calculator>
        <module:calculator id="energy" name="Energy">
            <module:expression analysistype="steadystate" axi="2.0 * PI * r * 0.5 / (ma_mur * MU0) * (udr * vdr + udz * vdz)"
                                                          planar="0.5 / (ma_mur * MU0) * (udx * vdx + udy * vdy)"/>
        </module:calculator>
  </module:error_calculator>

  <module:preprocessor>
    <module:gui type="volume">
      <module:group name="Material properties">
        <module:quantity condition="value > 0" default="1" id="magnetic_permeability" name="Permeability" shortname="mur" shortname_dependence="B" shortname_dependence_html="&lt;i>B&lt;/i>" shortname_html="&lt;i>&amp;mu;&lt;/i>&lt;sub>r&lt;/sub>" unit="-" unit_html="-" unit_latex="-"/>
        <module:quantity id="magnetic_conductivity" name="Electrical conductivity" shortname="gamma" shortname_html="&lt;i>&amp;gamma;&lt;/i>" unit="S/m" unit_html="S.m&lt;sup>-1&lt;/sup>" unit_latex="S \cdot m^{-1}"/>
      </module:group>
      <module:group name="Source">
        <module:quantity id="magnetic_current_density_external_real" name="Current dens. - ext. - real" is_source="1" only_if_not="magnetic_total_current_prescribed" shortname="Jer" shortname_html="&lt;i>J&lt;/i>&lt;sub>ext,r&lt;/sub>" unit="A/m2" unit_html="A.m&lt;sup>-2&lt;/sup>" unit_latex="A \cdot m^{-2}"/>
        <module:quantity id="magnetic_current_density_external_imag" name="Current dens. - ext. - imag" is_source="1" only_if_not="magnetic_total_current_prescribed" shortname="Jei" shortname_html="&lt;i>J&lt;/i>&lt;sub>ext,i&lt;/sub>" unit="A/m2" unit_html="A.m&lt;sup>-2&lt;/sup>" unit_latex="A \cdot m^{-2}"/>
        <module:quantity id="magnetic_total_current_prescribed" name="Total current prescribed" is_bool="1" shortname="IPrescribed" shortname_html="IPrescribed" unit="-" unit_html="-" unit_latex="-"/>
        <module:quantity id="magnetic_total_current_real" name="Total current - real" is_source="1" only_if="magnetic_total_current_prescribed" shortname="Itr" shortname_html="&lt;i>I&lt;/i>&lt;sub>t,r&lt;/sub>" unit="A" unit_html="A" unit_latex="A"/>
        <module:quantity id="magnetic_total_current_imag" name="Total current - imag" is_source="1" only_if="magnetic_total_current_prescribed" shortname="Iti" shortname_html="&lt;i>I&lt;/i>&lt;sub>t,i&lt;/sub>" unit="A" unit_html="A" unit_latex="A"/>
      </module:group>
      <module:group name="Permanent magnet">
        <module:quantity id="magnetic_remanence" name="Remanent flux density" shortname="Brm" shortname_html="&lt;i>B&lt;/i>&lt;sub>rm&lt;/sub>" unit="T" unit_html="T"/>
        <module:quantity id="magnetic_remanence_angle" name="Remanent flux density - angle" is_source="1" shortname="Bra" shortname_html="&lt;i>&amp;alpha;&lt;/i>&lt;sub>rm&lt;/sub>" unit="deg." unit_html="deg."/>
      </module:group>
      <module:group name="Velocity">
        <module:quantity id="magnetic_velocity_x" name="Velocity - x" is_source="1" shortname="vx" shortname_html="&lt;i>v&lt;/i>&lt;sub>x&lt;/sub>" unit="m/s" unit_html="m.s&lt;sup>-1&lt;/sup>" unit_latex="m \cdot s^{-1}"/>
        <module:quantity id="magnetic_velocity_y" name="Velocity - y" is_source="1" shortname="vy" shortname_html="&lt;i>v&lt;/i>&lt;sub>y&lt;/sub>" unit="m/s" unit_html="m.s&lt;sup>-1&lt;/sup>" unit_latex="m \cdot s^{-1}"/>
        <module:quantity id="magnetic_velocity_angular" name="Velocity - angular" is_source="1" shortname="va" shortname_html="&lt;i>&amp;omega;&lt;/i>" unit="m/s" unit_html="m.s&lt;sup>-1&lt;/sup>" unit_latex="m \cdot s^{-1}"/>
      </module:group>
    </module:gui>
    <module:gui type="surface">
      <module:group>
        <module:quantity condition="" default="0" id="magnetic_potential_real" name="Vector potential - real" shortname="Ar" shortname_html="&lt;i>A&lt;/i>&lt;sub>r&lt;/sub>" shortname_latex="" unit="Wb/m" unit_html="Wb.m&lt;sup>-1&lt;/sup>" unit_latex="Wb \cdot m^{-1}"/>
        <module:quantity condition="" default="0" id="magnetic_potential_imag" name="Vector potential - imag" shortname="Ai" shortname_html="&lt;i>A&lt;/i>&lt;sub>i&lt;/sub>" shortname_latex="" unit="Wb/m" unit_html="Wb.m&lt;sup>-1&lt;/sup>" unit_latex="Wb \cdot m^{-1}"/>
        <module:quantity condition="" default="0" id="magnetic_surface_current_real" name="Surface current - real" shortname="Jr" shortname_html="&lt;i>J&lt;/i>&lt;sub>r&lt;/sub>" shortname_latex="" unit="A/m" unit_html="A.m&lt;sup>-1&lt;/sup>" unit_latex="A \cdot m^{-1}"/>
        <module:quantity condition="" default="0" id="magnetic_surface_current_imag" name="Surface current - imag" shortname="Ji" shortname_html="&lt;i>J&lt;/i>&lt;sub>i&lt;/sub>" shortname_latex="" unit="A/m" unit_html="A.m&lt;sup>-1&lt;/sup>" unit_latex="A \cdot m^{-1}"/>
      </module:group>
    </module:gui>
  </module:preprocessor>

  <module:postprocessor>
    <module:localvariables>
      <module:localvariable id="magnetic_potential" name="Vector potential" shortname="A" shortname_html="&lt;i>A&lt;/i>" shortname_latex="A" type="scalar" unit="Wb/m" unit_html="Wb.m&lt;sup>-1&lt;/sup>" unit_latex="Wb \cdot m^{-1}">
        <module:expression analysistype="harmonic" axi="sqrt(value1*value1 + value2*value2)" planar="sqrt(value1*value1 + value2*value2)"/>
      </module:localvariable>
      <module:localvariable id="magnetic_potential_real" name="Vector potential - real" shortname="Ar" shortname_html="&lt;i>A&lt;/i>&lt;sub>r&lt;/sub>" shortname_latex="A_\mathrm{r}" type="scalar" unit="Wb/m" unit_html="Wb.m&lt;sup>-1&lt;/sup>" unit_latex="Wb \cdot m^{-1}">
        <module:expression analysistype="steadystate" axi="value1" planar="value1"/>
        <module:expression analysistype="transient" axi="value1" planar="value1"/>
        <module:expression analysistype="harmonic" axi="value1" planar="value1"/>
      </module:localvariable>
      <module:localvariable id="magnetic_potential_imag" name="Vector potential - imag" shortname="Ai" shortname_html="&lt;i>A&lt;/i>&lt;sub>i&lt;/sub>" shortname_latex="A_\mathrm{i}" type="scalar" unit="Wb/m" unit_html="Wb.m&lt;sup>-1&lt;/sup>" unit_latex="Wb \cdot m^{-1}">
        <module:expression analysistype="harmonic" axi="value2" planar="value2"/>
      </module:localvariable>
      <module:localvariable id="magnetic_potential_lines" name="Vector potential lines" shortname="Al" shortname_html="&lt;i>A&lt;/i>&lt;sub>l&lt;/sub>" shortname_latex="A_\mathrm{l}" type="scalar" unit="Wb" unit_html="Wb" unit_latex="Wb">
        <module:expression analysistype="harmonic" axi="sqrt((value1)*(value1) + (value2)*(value2)) * r" planar="sqrt((value1)*(value1) + (value2)*(value2))"/>
      </module:localvariable>
      <module:localvariable id="magnetic_potential_lines_real" name="Vector potential lines - real" shortname="Alr" shortname_html="&lt;i>A&lt;/i>&lt;sub>lr&lt;/sub>" shortname_latex="A_\mathrm{lr}" type="scalar" unit="Wb" unit_html="Wb" unit_latex="Wb">
        <module:expression analysistype="steadystate" axi="value1 * r" planar="value1"/>
        <module:expression analysistype="transient" axi="value1 * r" planar="value1"/>
        <module:expression analysistype="harmonic" axi="(value1) * r" planar="(value1)"/>
      </module:localvariable>
      <module:localvariable id="magnetic_potential_lines_imag" name="Vector potential lines - imag" shortname="Ali" shortname_html="&lt;i>A&lt;/i>&lt;sub>li&lt;/sub>" shortname_latex="A_\mathrm{li}" type="scalar" unit="Wb" unit_html="Wb" unit_latex="Wb">
        <module:expression analysistype="harmonic" axi="(value2) * r" planar="(value2)"/>
      </module:localvariable>
      <module:localvariable id="magnetic_flux_density" name="Flux density" shortname="B" shortname_html="&lt;i>B&lt;/i>" shortname_latex="B" type="scalar" unit="T" unit_html="T" unit_latex="T">
        <module:expression analysistype="harmonic" axi="sqrt(dz1*dz1 + (dr1 + tern(r > SMALL, value1/r, dr1))^2 + dz2*dz2 + (dr2 + tern(r > SMALL, value2/r, dr2))^2)" planar="sqrt(dy1*dy1 + dx1*dx1 + dy2*dy2 + dx2*dx2)"/>
      </module:localvariable>
      <module:localvariable id="magnetic_flux_density_real" name="Flux density - real" shortname="Br" shortname_html="&lt;i>B&lt;/i>&lt;sub>r&lt;/sub>" shortname_latex="B_\mathrm{r}" type="vector" unit="T" unit_html="T" unit_latex="T">
        <module:expression analysistype="steadystate" axi_r="- dz1" axi_z="dr1 + tern(r > SMALL, value1/r, dr1)" planar_x="dy1" planar_y="- dx1"/>
        <module:expression analysistype="transient" axi_r="- dz1" axi_z="dr1 + tern(r > SMALL, value1/r, dr1)" planar_x="dy1" planar_y="- dx1"/>
        <module:expression analysistype="harmonic" axi_r="- dz1" axi_z="dr1 + tern(r > SMALL, value1/r, dr1)" planar_x="dy1" planar_y="- dx1"/>
      </module:localvariable>
      <module:localvariable id="magnetic_flux_density_imag" name="Flux density - imag" shortname="Bi" shortname_html="&lt;i>B&lt;/i>&lt;sub>i&lt;/sub>" shortname_latex="B_\mathrm{i}" type="vector" unit="T" unit_html="T" unit_latex="T">
        <module:expression analysistype="harmonic" axi_r="- dz2" axi_z="dr2 + tern(r > SMALL, value2/r, dr2)" planar_x="dy2" planar_y="- dx2"/>
      </module:localvariable>
      <module:localvariable id="magnetic_magnetic_field" name="Magnetic field" shortname="H" shortname_html="&lt;i>H&lt;/i>" shortname_latex="H" type="scalar" unit="A/m" unit_html="A.m&lt;sup>-1&lt;/sup>" unit_latex="A \cdot m^{-1}">
        <module:expression analysistype="harmonic" axi="sqrt(dz1*dz1 + (dr1 + tern(r > SMALL, value1/r, dr1))^2 + dz2*dz2 + (dr2 + tern(r > SMALL, value2/r, dr2))^2) / (ma_mur * MU0)" planar="sqrt(dy1*dy1 + dx1*dx1 + dy2*dy2 + dx2*dx2) / (ma_mur * MU0)"/>
      </module:localvariable>
      <module:localvariable id="magnetic_magnetic_field_real" name="Magnetic field - real" shortname="Hr" shortname_html="&lt;i>H&lt;/i>&lt;sub>r&lt;/sub>" shortname_latex="H_\mathrm{r}" type="vector" unit="A/m" unit_html="A.m&lt;sup>-1&lt;/sup>" unit_latex="A \cdot m^{-1}">
        <module:expression analysistype="steadystate" axi_r="- dz1 / (ma_mur * MU0)" axi_z="(dr1 + tern(r > SMALL, value1/r, dr1)) / (ma_mur * MU0)" planar_x="dy1 / (ma_mur * MU0)" planar_y="- dx1 / (ma_mur * MU0)"/>
        <module:expression analysistype="transient" axi_r="- dz1 / (ma_mur * MU0)" axi_z="(dr1 + tern(r > SMALL, value1/r, dr1)) / (ma_mur * MU0)" planar_x="dy1 / (ma_mur * MU0)" planar_y="- dx1 / (ma_mur * MU0)"/>
        <module:expression analysistype="harmonic" axi_r="- dz1 / (ma_mur * MU0)" axi_z="(dr1 + tern(r > SMALL, value1/r, dr1)) / (ma_mur * MU0)" planar_x="dy1 / (ma_mur * MU0)" planar_y="- dx1 / (ma_mur * MU0)"/>
      </module:localvariable>
      <module:localvariable id="magnetic_magnetic_field_imag" name="Magnetic field - imag" shortname="Hi" shortname_html="&lt;i>H&lt;/i>&lt;sub>i&lt;/sub>" shortname_latex="H_\mathrm{i}" type="vector" unit="A/m" unit_html="A.m&lt;sup>-1&lt;/sup>" unit_latex="A \cdot m^{-1}">
        <module:expression analysistype="harmonic" axi_r="- dz2 / (ma_mur * MU0)" axi_z="(dr2 + tern(r > SMALL, value2/r, dr2)) / (ma_mur * MU0)" planar_x="dy2 / (ma_mur * MU0)" planar_y="- dx2 / (ma_mur * MU0)"/>
      </module:localvariable>
      <module:localvariable id="magnetic_energy_density" name="Energy density" shortname="wm" shortname_html="&lt;i>w&lt;/i>&lt;sub>m&lt;/sub>" shortname_latex="w_\mathrm{m}" type="scalar" unit="J/m3" unit_html="J.m&lt;sup>-3&lt;/sup>" unit_latex="J \cdot m^{-3}">
        <module:expression analysistype="steadystate" axi="0.5 * (dz1*dz1 + (dr1 + tern(r > SMALL, value1/r, dr1))^2) / (ma_mur * MU0)" planar="0.5 * (dy1*dy1 + dx1*dx1) / (ma_mur * MU0)"/>
        <module:expression analysistype="transient" axi="0.5 * (dz1*dz1 + (dr1 + tern(r > SMALL, value1/r, dr1))^2) / (ma_mur * MU0)" planar="0.5 * (dy1*dy1 + dx1*dx1) / (ma_mur * MU0)"/>
        <module:expression analysistype="harmonic" axi="0.25*(dz1*dz1 + (dr1 + tern(r > SMALL, value1/r, dr1))^2 + dz2*dz2 + (dr2 + tern(r > SMALL, value2/r, dr2))^2) / (ma_mur * MU0)" planar="0.25*(dy1*dy1 + dx1*dx1 + dy2*dy2 + dx2*dx2) / (ma_mur * MU0)"/>
      </module:localvariable>
      <module:localvariable id="magnetic_permeability" name="Permeability" shortname="mur" shortname_html="&lt;i>&amp;mu;&lt;/i>&lt;sub>r&lt;/sub>" shortname_latex="\mu_\mathrm{r}" type="scalar" unit="-" unit_html="-" unit_latex="-">
        <module:expression analysistype="steadystate" axi="ma_mur" planar="ma_mur"/>
        <module:expression analysistype="harmonic" axi="ma_mur" planar="ma_mur"/>
        <module:expression analysistype="transient" axi="ma_mur" planar="ma_mur"/>
      </module:localvariable>
      <module:localvariable id="magnetic_conductivity" name="Conductivity" shortname="gamma" shortname_html="&lt;i>&amp;gamma;&lt;/i>" shortname_latex="\gamma" type="scalar" unit="S/m" unit_html="S.m&lt;sup>-1&lt;/sup>" unit_latex="S \cdot m^{-1}">
        <module:expression analysistype="steadystate" axi="ma_gamma" planar="ma_gamma"/>
        <module:expression analysistype="harmonic" axi="ma_gamma" planar="ma_gamma"/>
        <module:expression analysistype="transient" axi="ma_gamma" planar="ma_gamma"/>
      </module:localvariable>
      <module:localvariable id="magnetic_remanence" name="Remanent flux density" shortname="Brm" shortname_html="&lt;i>B&lt;/i>&lt;sub>rm&lt;/sub>" shortname_latex="B_\mathrm{rm}" type="vector" unit="T" unit_html="T" unit_latex="T">
        <module:expression analysistype="steadystate" axi_r="mu_Brm * cos((ma_Bra/180*PI))" axi_z="mu_Brm * sin((ma_Bra/180*PI))" planar_x="mu_Brm * cos((ma_Bra/180*PI))" planar_y="mu_Brm * sin((ma_Bra/180*PI))"/>
        <module:expression analysistype="harmonic" axi_r="mu_Brm * cos((ma_Bra/180*PI))" axi_z="mu_Brm * sin((ma_Bra/180*PI))" planar_x="mu_Brm * cos((ma_Bra/180*PI))" planar_y="mu_Brm * sin((ma_Bra/180*PI))"/>
        <module:expression analysistype="transient" axi_r="mu_Brm * cos((ma_Bra/180*PI))" axi_z="mu_Brm * sin((ma_Bra/180*PI))" planar_x="mu_Brm * cos((ma_Bra/180*PI))" planar_y="mu_Brm * sin((ma_Bra/180*PI))"/>
      </module:localvariable>
      <module:localvariable id="magnetic_velocity" name="Velocity" shortname="v" shortname_html="&lt;i>v&lt;/i>" shortname_latex="v" type="vector" unit="m/s" unit_html="m.s&lt;sup>-1&lt;/sup>" unit_latex="m \cdot s^{-1}">
        <module:expression analysistype="steadystate" axi_r="0" axi_z="ma_vy" planar_x="ma_vx - ma_va * y" planar_y="ma_vy + ma_va * x"/>
        <module:expression analysistype="harmonic" axi_r="0" axi_z="ma_vy" planar_x="ma_vx - ma_va * y" planar_y="ma_vy + ma_va * x"/>
        <module:expression analysistype="transient" axi_r="0" axi_z="ma_vy" planar_x="ma_vx - ma_va * y" planar_y="ma_vy + ma_va * x"/>
      </module:localvariable>
      <module:localvariable id="magnetic_current_density_external" name="Current dens. - ext." shortname="Je" shortname_html="&lt;i>J&lt;/i>&lt;sub>e&lt;/sub>" shortname_latex="J_\mathrm{e}" type="scalar" unit="A/m2" unit_html="A.m&lt;sup>-2&lt;/sup>" unit_latex="A \cdot m^{-2}">
        <module:expression analysistype="steadystate" axi="ma_Jer" planar="ma_Jer"/>
        <module:expression analysistype="transient" axi="ma_Jer" planar="ma_Jer"/>
        <module:expression analysistype="harmonic" axi="sqrt((ma_Jer + 2 * PI * f * ma_gamma * value4/(2*PI*(r+1e-12)))^2+(ma_Jei - 2 * PI * f * ma_gamma * value3/(2*PI*(r+1e-12)))^2)" planar="sqrt((ma_Jer + 2 * PI * f * ma_gamma * value4)^2+(ma_Jei - 2 * PI * f * ma_gamma * value3)^2)"/>
      </module:localvariable>
      <module:localvariable id="magnetic_current_density_external_real" name="Current dens. - ext. - real" shortname="Jer" shortname_html="&lt;i>J&lt;/i>&lt;sub>er&lt;/sub>" shortname_latex="J_\mathrm{er}" type="scalar" unit="A/m2" unit_html="A.m&lt;sup>-2&lt;/sup>" unit_latex="A \cdot m^{-2}">
        <module:expression analysistype="harmonic" axi="ma_Jer + 2 * PI * f * ma_gamma * value4/(2*PI*(r+1e-12))" planar="ma_Jer + 2 * PI * f * ma_gamma * value4"/>
      </module:localvariable>
      <module:localvariable id="magnetic_current_density_external_imag" name="Current dens. - ext. - imag" shortname="Jei" shortname_html="&lt;i>J&lt;/i>&lt;sub>ei&lt;/sub>" shortname_latex="J_\mathrm{ei}" type="scalar" unit="A/m2" unit_html="A.m&lt;sup>-2&lt;/sup>" unit_latex="A \cdot m^{-2}">
        <module:expression analysistype="harmonic" axi="ma_Jei - 2 * PI * f * ma_gamma * value3/(2*PI*(r+1e-12))" planar="ma_Jei - 2 * PI * f * ma_gamma * value3"/>
      </module:localvariable>
      <module:localvariable id="magnetic_current_density_induced_velocity" name="Current dens. - ind. velocity" shortname="Jiv" shortname_html="&lt;i>J&lt;/i>&lt;sub>iv&lt;/sub>" shortname_latex="J_\mathrm{iv}" type="scalar" unit="A/m2" unit_html="A.m&lt;sup>-2&lt;/sup>" unit_latex="A \cdot m^{-2}">
        <module:expression analysistype="harmonic" axi="sqrt((- ma_gamma * (ma_vy * dz1))^2+(- ma_gamma * (ma_vy * dz2))^2)" planar="sqrt((- ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1))^2+(- ma_gamma * ((ma_vx - ma_va * y) * dx2 + (ma_vy + ma_va * x) * dy2))^2)"/>
      </module:localvariable>
      <module:localvariable id="magnetic_current_density_induced_velocity_real" name="Current dens. - ind. velocity - real" shortname="Jivr" shortname_html="&lt;i>J&lt;/i>&lt;sub>ivr&lt;/sub>" shortname_latex="J_\mathrm{ivr}" type="scalar" unit="A/m2" unit_html="A.m&lt;sup>-2&lt;/sup>" unit_latex="A \cdot m^{-2}">
        <module:expression analysistype="steadystate" axi="- ma_gamma * (ma_vy * dz1)" planar="- ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1)"/>
        <module:expression analysistype="harmonic" axi="- ma_gamma * (ma_vy * dz1)" planar="- ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1)"/>
        <module:expression analysistype="transient" axi="- ma_gamma * (ma_vy * dz1)" planar="- ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1)"/>
      </module:localvariable>
      <module:localvariable id="magnetic_current_density_induced_velocity_imag" name="Current dens. - ind. velocity - imag" shortname="Jivi" shortname_html="&lt;i>J&lt;/i>&lt;sub>ivi&lt;/sub>" shortname_latex="J_\mathrm{ivi}" type="scalar" unit="A/m2" unit_html="A.m&lt;sup>-2&lt;/sup>" unit_latex="A \cdot m^{-2}">
        <module:expression analysistype="harmonic" axi="- ma_gamma * (ma_vy * dz2)" planar="- ma_gamma * ((ma_vx - ma_va * y) * dx2 + (ma_vy + ma_va * x) * dy2)"/>
      </module:localvariable>
      <module:localvariable id="magnetic_current_density_induced_transform" name="Current dens. - ind. transform" shortname="Jit" shortname_html="&lt;i>J&lt;/i>&lt;sub>it&lt;/sub>" shortname_latex="J_\mathrm{it}" type="scalar" unit="A/m2" unit_html="A.m&lt;sup>-2&lt;/sup>" unit_latex="A \cdot m^{-2}">
        <module:expression analysistype="harmonic" axi="sqrt((2 * PI * f * ma_gamma * value2)^2+(- 2 * PI * f * ma_gamma * value1)^2)" planar="sqrt((2 * PI * f * ma_gamma * value2)^2+(- 2 * PI * f * ma_gamma * value1)^2)"/>
      </module:localvariable>
      <module:localvariable id="magnetic_current_density_induced_transform_real" name="Current dens. - ind. transform - real" shortname="Jitr" shortname_html="&lt;i>J&lt;/i>&lt;sub>itr&lt;/sub>" shortname_latex="J_\mathrm{itr}" type="scalar" unit="A/m2" unit_html="A.m&lt;sup>-2&lt;/sup>" unit_latex="A \cdot m^{-2}">
        <module:expression analysistype="transient" axi="- ma_gamma * value2" planar="- ma_gamma * value2"/>
        <module:expression analysistype="harmonic" axi="2 * PI * f * ma_gamma * value2" planar="2 * PI * f * ma_gamma * value2"/>
      </module:localvariable>
      <module:localvariable id="magnetic_current_density_induced_transform_imag" name="Current dens. - ind. transform - imag" shortname="Jiti" shortname_html="&lt;i>J&lt;/i>&lt;sub>iti&lt;/sub>" shortname_latex="J_\mathrm{iti}" type="scalar" unit="A/m2" unit_html="A.m&lt;sup>-2&lt;/sup>" unit_latex="A \cdot m^{-2}">
        <module:expression analysistype="harmonic" axi="- 2 * PI * f * ma_gamma * value1" planar="- 2 * PI * f * ma_gamma * value1"/>
      </module:localvariable>
      <module:localvariable id="magnetic_current_density_total" name="Current dens. - total" shortname="J" shortname_html="&lt;i>J&lt;/i>" shortname_latex="J" type="scalar" unit="A/m2" unit_html="A.m&lt;sup>-2&lt;/sup>" unit_latex="A \cdot m^{-2}">
        <module:expression analysistype="harmonic" axi="sqrt((ma_Jer - ma_gamma * (ma_vy * dz1) + 2 * PI * f * ma_gamma * (value2+value4/(r+1e-12)))^2+(ma_Jei - ma_gamma * (ma_vy * dz2) - 2 * PI * f * ma_gamma * (value1+value3/(2*PI*(r+1e-12))))^2)" planar="sqrt((ma_Jer - ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1) + 2 * PI * f * ma_gamma * (value2+value4))^2+(ma_Jei - ma_gamma * ((ma_vx - ma_va * y) * dx2 + (ma_vy + ma_va * x) * dy2) - 2 * PI * f * ma_gamma * (value1+value3))^2)"/>
        <module:expression analysistype="steadystate" axi="ma_Jer_compl - ma_gamma * (ma_vy * dz1)" planar="ma_Jer_compl - ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1)"/>
      </module:localvariable>
      <module:localvariable id="magnetic_current_density_total_real" name="Current dens. - total - real" shortname="Jr" shortname_html="&lt;i>J&lt;/i>&lt;sub>r&lt;/sub>" shortname_latex="J_\mathrm{r}" type="scalar" unit="A/m2" unit_html="A.m&lt;sup>-2&lt;/sup>" unit_latex="A \cdot m^{-2}">
        <module:expression analysistype="steadystate" axi="ma_Jer_compl - ma_gamma * (ma_vy * dz1)" planar="ma_Jer_compl - ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1)"/>
        <module:expression analysistype="harmonic" axi="ma_Jer - ma_gamma * (ma_vy * dz1) + 2 * PI * f * ma_gamma * (value2+value4/(2*PI*(r+1e-12)))" planar="ma_Jer - ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1) + 2 * PI * f * ma_gamma * (value2+value4)"/>
        <module:expression analysistype="transient" axi="ma_Jer - ma_gamma * (ma_vy * dz1) - ma_gamma * value2" planar="ma_Jer - ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1) - ma_gamma * value2"/>
      </module:localvariable>
      <module:localvariable id="magnetic_current_density_total_imag" name="Current dens. - total - imag" shortname="Ji" shortname_html="&lt;i>J&lt;/i>&lt;sub>i&lt;/sub>" shortname_latex="J_\mathrm{i}" type="scalar" unit="A/m2" unit_html="A.m&lt;sup>-2&lt;/sup>" unit_latex="A \cdot m^{-2}">
        <module:expression analysistype="harmonic" axi="ma_Jei - ma_gamma * (ma_vy * dz2) - 2 * PI * f * ma_gamma * (value1+value3/(2*PI*(r+1e-12)))" planar="ma_Jei - ma_gamma * ((ma_vx - ma_va * y) * dx2 + (ma_vy + ma_va * x) * dy2) - 2 * PI * f * ma_gamma * (value1+value3)"/>
      </module:localvariable>
      <module:localvariable id="magnetic_losses_density" name="Losses density" shortname="pj" shortname_html="&lt;i>p&lt;/i>&lt;sub>J&lt;/sub>" shortname_latex="p_\mathrm{J}" type="scalar" unit="W/m3" unit_html="W.m&lt;sup>-3&lt;/sup>" unit_latex="W \cdot m^{-3}">
        <module:expression analysistype="steadystate" axi="((ma_gamma > 0.0) ? ma_Jer_compl*ma_Jer_compl / ma_gamma : 0.0) + ma_gamma * (ma_vy * dz1)^2" planar="((ma_gamma > 0.0) ? ma_Jer_compl*ma_Jer_compl / ma_gamma : 0.0) + ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1)^2"/>
        <module:expression analysistype="harmonic" axi="(ma_gamma > 0.0) ? 0.5 * ((ma_Jer - ma_gamma * (ma_vy * dz1) + 2 * PI * f * ma_gamma * (value2+value4/(2*PI*(r+1e-12))))^2 + (ma_Jei - ma_gamma * (ma_vy * dz2) - 2 * PI * f * ma_gamma * (value1+value3/(2*PI*(r+1e-12))))^2) / ma_gamma : 0.0" planar="(ma_gamma > 0.0) ? 0.5 * ((ma_Jer - ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1) + 2 * PI * f * ma_gamma * (value2+value4))^2 + (ma_Jei - ma_gamma * ((ma_vx - ma_va * y) * dx2 + (ma_vy + ma_va * x) * dy2) - 2 * PI * f * ma_gamma * (value1+value3))^2) / ma_gamma : 0.0"/>
        <module:expression analysistype="transient" axi="((ma_gamma > 0.0) ? (ma_Jer+ma_gamma * value2)^2 / ma_gamma : 0.0) + ma_gamma * (ma_vy * dz1)^2" planar="((ma_gamma > 0.0) ? (ma_Jer - ma_gamma * value2)^2 / ma_gamma : 0.0) + ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1)^2"/>
      </module:localvariable>
      <module:localvariable id="magnetic_lorentz_force" name="Lorentz force" shortname="Fl" shortname_html="&lt;i>F&lt;/i>&lt;sub>L&lt;/sub>" shortname_latex="F_\mathrm{L}" type="vector" unit="N" unit_html="N" unit_latex="N">
        <module:expression analysistype="steadystate" axi_r="(ma_Jer_compl - ma_gamma * (ma_vy * dz1)) * (dr1 + tern(r > SMALL, value1/r, dr1))" axi_z="- ((ma_Jer_compl - ma_gamma * (ma_vy * dz1)) * (- dz1))" planar_x="- (ma_Jer_compl - ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1)) * (- dx1)" planar_y="(ma_Jer_compl - ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1)) * dy1"/>
        <module:expression analysistype="harmonic" axi_r="0.5 * (((ma_Jer - ma_gamma * (ma_vy * dz1) + 2 * PI * f * ma_gamma * (value2+value4/(2*PI*(r+1e-12)))) * (dr1 + tern(r > SMALL, (value1+value3/(2*PI*(r+1e-12)))/r, dr1)) - ((ma_Jei - ma_gamma * (ma_vy * dz2) - 2 * PI * f * ma_gamma * (value1+value3/(2*PI*(r+1e-12)))) * (dr2 + tern(r > 0, (value2+value4/(2*PI*(r+1e-12)))/r, dr2)))))" axi_z="- 0.5 * ((((ma_Jer - ma_gamma * (ma_vy * dz1) + 2 * PI * f * ma_gamma * (value2+value4/(2*PI*(r+1e-12)))) * (- dz1)) - ((ma_Jei - ma_gamma * (ma_vy * dz2) - 2 * PI * f * ma_gamma * (value1+value3/(2*PI*(r+1e-12)))) * (- dz2))))" planar_x="0.5 * (((- ma_Jer + ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1) - (2 * PI * f * ma_gamma * (value2+value4))) * (- dx1)) + ((- ma_Jei + ma_gamma * ((ma_vx - ma_va * y) * dx2 + (ma_vy + ma_va * x) * dy2) + (2 * PI * f * ma_gamma * (value1+value3))) * ( - dx2)))" planar_y="-0.5 * (((- ma_Jer + ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1) - (2 * PI * f * ma_gamma * (value2+value4))) * (dy1)) + ((- ma_Jei + ma_gamma * ((ma_vx - ma_va * y) * dx2 + (ma_vy + ma_va * x) * dy2) + (2 * PI * f * ma_gamma * (value1+value3))) * (dy2)))"/>
        <module:expression analysistype="transient" axi_r="(ma_Jer - ma_gamma * (ma_vy * dz1) - ma_gamma * value2) * (dr1 + tern(r > SMALL, value1/r, dr1))" axi_z="- ((ma_Jer - ma_gamma * (ma_vy * dz1) - ma_gamma * value2) * (- dz1))" planar_x="- (ma_Jer - ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1) - ma_gamma * value2) * (- dx1)" planar_y="(ma_Jer - ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1) - ma_gamma * value2) * dy1"/>
      </module:localvariable>
      <module:localvariable id="magnetic_lorentz_torque" name="Lorentz torque" shortname="Tl" shortname_html="&lt;i>T&lt;/i>&lt;sub>L&lt;/sub>" shortname_latex="T_\mathrm{L}" type="scalar" unit="Nm" unit_html="Nm" unit_latex="Nm">
        <module:expression analysistype="steadystate" axi="0" planar="y * (- (ma_Jer_compl - ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1)) * (- dx1)) - x * ((ma_Jer_compl - ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1)) * dy1)"/>
        <module:expression analysistype="harmonic" axi="0" planar="y * (0.5 * (((- ma_Jer + ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1) - (2 * PI * f * ma_gamma * (value2+value4))) * (- dx1)) + ((- ma_Jei + ma_gamma * ((ma_vx - ma_va * y) * dx2 + (ma_vy + ma_va * x) * dy2) + (2 * PI * f * ma_gamma * (value1+value3))) * ( - dx2)))) - x * (-0.5 * (((- ma_Jer + ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1) - (2 * PI * f * ma_gamma * (value2+value4))) * (dy1)) + ((- ma_Jei + ma_gamma * ((ma_vx - ma_va * y) * dx2 + (ma_vy + ma_va * x) * dy2) + (2 * PI * f * ma_gamma * (value1+value3))) * (dy2))))"/>
        <module:expression analysistype="transient" axi="0" planar="x * (- (ma_Jer - ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1) - ma_gamma * value2) * (- dx1)) - x * ((ma_Jer - ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1) - ma_gamma * value2) * dy1)"/>
      </module:localvariable>
    </module:localvariables>
    <module:view>
      <module:scalar_view>
        <module:default analysistype="steadystate" id="magnetic_flux_density_real"/>
        <module:default analysistype="transient" id="magnetic_flux_density_real"/>
        <module:default analysistype="harmonic" id="magnetic_flux_density_real"/>
      </module:scalar_view>
      <module:vector_view>
        <module:default analysistype="steadystate" id="magnetic_flux_density_real"/>
        <module:default analysistype="transient" id="magnetic_flux_density_real"/>
        <module:default analysistype="harmonic" id="magnetic_flux_density_real"/>
      </module:vector_view>
    </module:view>
    <module:volumeintegrals>
      <module:volumeintegral id="magnetic_volume" name="Volume" shortname="V" shortname_html="&lt;i>V&lt;/i>" shortname_latex="V" unit="m3" unit_html="m&lt;sup>3&lt;/sup>" unit_latex="m^{3}">
        <module:expression analysistype="steadystate" axi="2.0 * PI * r" planar="1.0"/>
        <module:expression analysistype="harmonic" axi="2.0 * PI * r" planar="1.0"/>
        <module:expression analysistype="transient" axi="2.0 * PI * r" planar="1.0"/>
      </module:volumeintegral>
      <module:volumeintegral id="magnetic_cross_section" name="Cross section" shortname="S" shortname_html="&lt;i>S&lt;/i>" shortname_latex="S" unit="m2" unit_html="m&lt;sup>2&lt;/sup>" unit_latex="m^{2}">
        <module:expression analysistype="steadystate" axi="1.0" planar="1.0"/>
        <module:expression analysistype="harmonic" axi="1.0" planar="1.0"/>
        <module:expression analysistype="transient" axi="1.0" planar="1.0"/>
      </module:volumeintegral>
      <module:volumeintegral id="magnetic_current_external_real" name="Current - ext. - real" shortname="Ier" shortname_html="&lt;i>I&lt;/i>&lt;sub>er&lt;/sub>" shortname_latex="I_\mathrm{er}" unit="A" unit_html="" unit_latex="">
        <module:expression analysistype="steadystate" axi="ma_Jer" planar="ma_Jer"/>
        <module:expression analysistype="transient" axi="ma_Jer" planar="ma_Jer"/>
        <module:expression analysistype="harmonic" axi="ma_Jer + 2 * PI * f * ma_gamma * value4/(2*PI*(r+1e-12))" planar="ma_Jer + 2 * PI * f * ma_gamma * value4"/>
      </module:volumeintegral>
      <module:volumeintegral id="magnetic_current_external_imag" name="Current - ext. - imag" shortname="Iei" shortname_html="&lt;i>I&lt;/i>&lt;sub>ei&lt;/sub>" shortname_latex="I_\mathrm{ei}" unit="A" unit_html="" unit_latex="">
        <module:expression analysistype="harmonic" axi="ma_Jei- 2 * PI * f * ma_gamma * value3/(2*PI*(r+1e-12))" planar="ma_Jei - 2 * PI * f * ma_gamma * value3"/>
      </module:volumeintegral>
      <module:volumeintegral id="magnetic_current_induced_transform_real" name="Current - ind. transform - real" shortname="Iitr" shortname_html="&lt;i>I&lt;/i>&lt;sub>itr&lt;/sub>" shortname_latex="I_\mathrm{itr}" unit="A" unit_html="" unit_latex="">
        <module:expression analysistype="transient" axi="- ma_gamma * value2" planar="- ma_gamma * value2"/>
        <module:expression analysistype="harmonic" axi="2 * PI * f * ma_gamma * value2" planar="2 * PI * f * ma_gamma * value2"/>
      </module:volumeintegral>
      <module:volumeintegral id="magnetic_current_induced_transform_imag" name="Current - ind. transform - imag" shortname="Iiti" shortname_html="&lt;i>I&lt;/i>&lt;sub>iti&lt;/sub>" shortname_latex="I_\mathrm{iti}" unit="A" unit_html="" unit_latex="">
        <module:expression analysistype="harmonic" axi="- 2 * PI * f * ma_gamma * value1" planar="- 2 * PI * f * ma_gamma * value1"/>
      </module:volumeintegral>
      <module:volumeintegral id="magnetic_current_velocity_real" name="Current - velocity - real" shortname="Iivr" shortname_html="&lt;i>I&lt;/i>&lt;sub>ivr&lt;/sub>" shortname_latex="I_\mathrm{ivr}" unit="A" unit_html="" unit_latex="">
        <module:expression analysistype="steadystate" axi="- ma_gamma * (ma_vy * dz1)" planar="- ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1)"/>
        <module:expression analysistype="harmonic" axi="- ma_gamma * (ma_vy * dz1)" planar="- ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1) + 2 * PI * f * ma_gamma * value2"/>
        <module:expression analysistype="transient" axi="- ma_gamma * (ma_vy * dz1) - ma_gamma * value2" planar="- ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1) - ma_gamma * value2"/>
      </module:volumeintegral>
      <module:volumeintegral id="magnetic_current_total_real" name="Current - total - real" shortname="Ir" shortname_html="&lt;i>I&lt;/i>&lt;sub>r&lt;/sub>" shortname_latex="I_\mathrm{r}" unit="A" unit_html="" unit_latex="">
        <module:expression analysistype="steadystate" axi="ma_Jer_compl - ma_gamma * (ma_vy * dz1)" planar="ma_Jer_compl - ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1)"/>
        <module:expression analysistype="harmonic" axi="ma_Jer - ma_gamma * (ma_vy * dz1) + 2 * PI * f * ma_gamma * (value2+value4/(2*PI*(r+1e-12)))" planar="ma_Jer - ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1) + 2 * PI * f * ma_gamma * (value2+value4)"/>
        <module:expression analysistype="transient" axi="ma_Jer - ma_gamma * (ma_vy * dz1) - ma_gamma * value2" planar="ma_Jer - ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1) - ma_gamma * value2"/>
      </module:volumeintegral>
      <module:volumeintegral id="magnetic_current_total_imag" name="Current - total - imag" shortname="Ii" shortname_html="&lt;i>I&lt;/i>&lt;sub>i&lt;/sub>" shortname_latex="I_\mathrm{i}" unit="A" unit_html="" unit_latex="">
        <module:expression analysistype="harmonic" axi="ma_Jei - ma_gamma * (ma_vy * dz2) - 2 * PI * f * ma_gamma * (value1+value3/(2*PI*(r+1e-12)))" planar="ma_Jei - ma_gamma * ((ma_vx - ma_va * y) * dx2 + (ma_vy + ma_va * x) * dy2) - 2 * PI * f * ma_gamma * (value1+value3)"/>
      </module:volumeintegral>
      <module:volumeintegral id="magnetic_energy" name="Energy" shortname="Wm" shortname_html="&lt;i>W&lt;/i>&lt;sub>m&lt;/sub>" shortname_latex="W_\mathrm{m}" unit="J" unit_html="" unit_latex="">
        <module:expression analysistype="steadystate" axi="2.0 * PI * r * 0.5 / (ma_mur * MU0) * (dz1*dz1 + (dr1 + tern(r > SMALL, value1/r, dr1))^2)" planar="0.5 / (ma_mur * MU0) * (dx1 * dx1 + dy1 * dy1)"/>
        <module:expression analysistype="harmonic" axi="2 * PI * r * 0.25 / (ma_mur * MU0) * ((dz1*dz1 + (dr1 + tern(r > SMALL, value1/r, dr1))^2) + (dz2*dz2 + (dr2 + tern(r > SMALL, value2/r, dr2))^2))" planar="0.25 * ((dx1*dx1 + dy1*dy1) + (dx2*dx2 + dy2*dy2)) / (ma_mur * MU0)"/>
        <module:expression analysistype="transient" axi="2.0 * PI * r * 0.5 / (ma_mur * MU0) * (dz1*dz1 + (dr1 + tern(r > SMALL, value1/r, dr1))^2)" planar="0.5 / (ma_mur * MU0) * (dx1 * dx1 + dy1 * dy1)"/>
      </module:volumeintegral>
      <module:volumeintegral id="magnetic_losses" name="Power losses" shortname="Pj" shortname_html="&lt;i>P&lt;/i>&lt;sub>j&lt;/sub>" shortname_latex="P_\mathrm{J}" unit="W" unit_html="" unit_latex="">
        <module:expression analysistype="steadystate" axi="(ma_gamma > 0.0) ? 2 * PI * r / ma_gamma * (ma_Jer_compl - ma_vy * dz1)^2 : 0.0" planar="(ma_gamma > 0.0) ? 1.0 / ma_gamma * (ma_Jer_compl - ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1))^2 : 0.0"/>
        <module:expression analysistype="harmonic" axi="(ma_gamma > 0.0) ? 2 * PI * r * 0.5 / ma_gamma * ((ma_Jei - ma_gamma * ((ma_vx - ma_va * z) * dr2 + (ma_vy + ma_va * r) * dz2) - 2 * PI * f * ma_gamma * (value1+value3/(2*PI*(r+1e-12))))^2 + (ma_Jer - ma_gamma * ((ma_vx - ma_va * z) * dr1 + (ma_vy + ma_va * r) * dz1) + 2 * PI * f * ma_gamma * (value2+value4/(2*PI*(r+1e-12))))^2) : 0.0" planar="(ma_gamma > 0.0) ? 0.5 * ((ma_Jer - ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1) + 2 * PI * f * ma_gamma * (value2+value4))^2 + (ma_Jei - ma_gamma * ((ma_vx - ma_va * y) * dx2 + (ma_vy + ma_va * x) * dy2) - 2 * PI * f * ma_gamma * (value1+value3))^2) / ma_gamma : 0.0"/>
        <module:expression analysistype="transient" axi="(ma_gamma > 0.0) ? 2 * PI * r / ma_gamma * (ma_Jer - ma_gamma * value2 - ma_vy * dz1)^2 : 0.0" planar="((ma_gamma > 0.0) ? (ma_Jer - ma_gamma * value2)^2 / ma_gamma : 0.0) + ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1)^2"/>
      </module:volumeintegral>
      <module:volumeintegral id="magnetic_lorentz_torque" name="Lorentz torque" shortname="Tl" shortname_html="&lt;i>T&lt;/i>&lt;/i>&lt;sub>L&lt;/sub>" shortname_latex="T_\mathrm{L}" unit="Nm" unit_html="Nm" unit_latex="Nm">
        <module:expression analysistype="steadystate" axi="0" planar="y * dx1 * (ma_Jer_compl - ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1)) - x * dy1 * (ma_Jer_compl - ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va *x) * dy1))"/>
        <module:expression analysistype="harmonic" axi="0" planar="y * (0.5 * (((- ma_Jer + ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1) - (2 * PI * f * ma_gamma * (value2+value4))) * (- dx1)) + ((- ma_Jei + ma_gamma * ((ma_vx - ma_va * y) * dx2 + (ma_vy + ma_va * x) * dy2) + (2 * PI * f * ma_gamma * (value1+value3))) * ( - dx2)))) - x * (-0.5 * (((- ma_Jer + ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1) - (2 * PI * f * ma_gamma * (value2+value4))) * (dy1)) + ((- ma_Jei + ma_gamma * ((ma_vx - ma_va * y) * dx2 + (ma_vy + ma_va * x) * dy2) + (2 * PI * f * ma_gamma * (value1+value3))) * (dy2))))"/>
        <module:expression analysistype="transient" axi="0" planar="y * dx1 * (ma_Jer - ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1) - ma_gamma * value2) - x * dy1 * (ma_Jer - ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va *x) * dy1))"/>
      </module:volumeintegral>
      <module:volumeintegral id="magnetic_lorentz_force_x" name="Lorentz force - x" shortname="Flx" shortname_html="&lt;i>F&lt;/i>&lt;sub>Lx&lt;/sub>" shortname_latex="F_\mathrm{Lx}" unit="N" unit_html="N" unit_latex="N">
        <module:expression analysistype="steadystate" axi="2 * PI * r * (dr1 + tern(r > SMALL, value1/r, dr1)) * (ma_Jer_compl - ma_gamma * (ma_vy * dz1))" planar="dx1 * (ma_Jer_compl - ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1))"/>
        <module:expression analysistype="harmonic" axi="-0.5 * ((-(2 * PI * r * (ma_Jer + 2 * PI * f * ma_gamma * (value2+value4)) * (dr1 + ((r > 0) ? (value1+value3) / r : 0.0))) + (2 * PI * r * (ma_Jei + 2 * PI * f * ma_gamma * (value1+value3)) * (dr2 + ((r > 0) ? (value2+value4) / r : 0.0))))                                              + dr1 * (-ma_gamma * ((ma_vx - ma_va * z) * dr1 + (ma_vy + ma_va * r) * dz1)))" planar="-0.5 * (-((ma_Jer + 2 * PI * f * ma_gamma * (value2+value4)) * dx1) + ((ma_Jei + 2 * PI * f * ma_gamma * (value1+value3)) * dx2))                                                 + dx1 * (ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1))"/>
        <module:expression analysistype="transient" axi="2 * PI * r * (dr1 + tern(r > SMALL, value1/r, dr1)) * (ma_Jer - ma_gamma * (ma_vy * dz1)- ma_gamma * value2)" planar="dx1 * (ma_Jer - ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1)- ma_gamma * value2)"/>
      </module:volumeintegral>
      <module:volumeintegral id="magnetic_lorentz_force_y" name="Lorentz force - y" shortname="Fly" shortname_html="&lt;i>F&lt;/i>&lt;sub>Ly&lt;/sub>" shortname_latex="F_\mathrm{Ly}" unit="N" unit_html="N" unit_latex="N">
        <module:expression analysistype="steadystate" axi="2 * PI * r * dz1 * (ma_Jer_compl - ma_gamma * (ma_vy * dz1))" planar="dy1 * (-ma_Jer_compl - ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1))"/>
        <module:expression analysistype="harmonic" axi="-2 * PI * r * 0.5 * (-((ma_Jer + 2 * PI * f * ma_gamma * (value2+value4)) * dz1) + ((ma_Jei + 2 * PI * f * ma_gamma * (value1+value3)) * dz2))                                              + 2 * PI * r * dz1 * (-ma_gamma * ((ma_vx - ma_va * z) * dr1 + (ma_vy + ma_va * r) * dz1))" planar="-0.5 * (-((ma_Jer + 2 * PI * f * ma_gamma * (value2+value4)) * dy1) + ((ma_Jei + 2 * PI * f * ma_gamma * (value1+value3)) * dy2))                                                 + dy1 * (ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1))"/>
        <module:expression analysistype="transient" axi="2 * PI * r * dz1 * (ma_Jer - ma_gamma * (ma_vy * dz1) - ma_gamma * value2)" planar="dy1 * (-ma_Jer - ma_gamma * ((ma_vx - ma_va * y) * dx1 + (ma_vy + ma_va * x) * dy1) - ma_gamma * value2)"/>
      </module:volumeintegral>
    </module:volumeintegrals>

    <module:surfaceintegrals>
      <module:surfaceintegral id="magnetic_length" name="Length" shortname="l" shortname_html="&lt;i>l&lt;/i>" shortname_latex="l" unit="m" unit_html="" unit_latex="">
        <module:expression analysistype="steadystate" axi="1.0" planar="1.0"/>
        <module:expression analysistype="harmonic" axi="1.0" planar="1.0"/>
        <module:expression analysistype="transient" axi="1.0" planar="1.0"/>
      </module:surfaceintegral>
      <module:surfaceintegral id="magnetic_surface" name="Surface" shortname="S" shortname_html="&lt;i>S&lt;/i>" shortname_latex="S" unit="m2" unit_html="m&lt;sup>2&lt;/sup>" unit_latex="m^{2}">
        <module:expression analysistype="steadystate" axi="2.0 * PI * r" planar="1.0"/>
        <module:expression analysistype="harmonic" axi="1.0" planar="1.0"/>
        <module:expression analysistype="transient" axi="1.0" planar="1.0"/>
      </module:surfaceintegral>
      <module:surfaceintegral id="magnetic_tensor_torque" name="Maxwell torque" shortname="Tm" shortname_html="&lt;i>T&lt;/i>&lt;sub>m&lt;/sub>" shortname_latex="T_\mathrm{m}" unit="Nm" unit_html="Nm" unit_latex="Nm">
        <module:expression analysistype="steadystate" axi="0.0" planar="y * (tern(SMALL > fabs(ma_mur - 1.0), - 2.0 / (MU0 * ma_mur) * ((-dy1) * (tany * (-dy1) + (-tanx) * dx1) - 0.5 * tany * (dy1*dy1 + dx1*dx1)), 0.0)) - x * (tern(SMALL > fabs(ma_mur - 1.0), - 2.0 / (MU0 * ma_mur) * ((-dy1) * (tany * (-dy1) + (-tanx) * dx1) - 0.5 * tany * (dy1*dy1 + dx1*dx1)), 0.0))"/>
        <module:expression analysistype="transient" axi="0.0" planar="y * (tern(SMALL > fabs(ma_mur - 1.0), - 2.0 / (MU0 * ma_mur) * ((-dy1) * (tany * (-dy1) + (-tanx) * dx1) - 0.5 * tany * (dy1*dy1 + dx1*dx1)), 0.0)) - x * (tern(SMALL > fabs(ma_mur - 1.0), - 2.0 / (MU0 * ma_mur) * ((-dy1) * (tany * (-dy1) + (-tanx) * dx1) - 0.5 * tany * (dy1*dy1 + dx1*dx1)), 0.0))"/>
      </module:surfaceintegral>
      <module:surfaceintegral id="magnetic_tensor_x" name="Maxwell force - x" shortname="Ftx" shortname_html="&lt;i>F&lt;/i>&lt;sub>Lx&lt;/sub>" shortname_latex="F_\mathrm{tx}" unit="N" unit_html="N" unit_latex="N">
        <module:expression analysistype="steadystate" axi="0.0" planar="tern(SMALL > fabs(ma_mur - 1.0), - 2.0 / (MU0 * ma_mur) * ((-dy1) * (tany * (-dy1) + (-tanx) * dx1) - 0.5 * tany * (dy1*dy1 + dx1*dx1)), 0.0)"/>
        <module:expression analysistype="transient" axi="0.0" planar="tern(SMALL > fabs(ma_mur - 1.0), - 2.0 / (MU0 * ma_mur) * ((-dy1) * (tany * (-dy1) + (-tanx) * dx1) - 0.5 * tany * (dy1*dy1 + dx1*dx1)), 0.0)"/>
      </module:surfaceintegral>
      <module:surfaceintegral id="magnetic_tensor_y" name="Maxwell force - y" shortname="Fty" shortname_html="&lt;i>F&lt;/i>&lt;sub>Ly&lt;/sub>" shortname_latex="F_\mathrm{ty}" unit="N" unit_html="N" unit_latex="N">
        <module:expression analysistype="steadystate" axi="tern(SMALL > fabs(ma_mur - 1.0), - 4.0 * PI * r / (MU0 * ma_mur) * ((dr1 + tern(r > SMALL, value1/r, dr1)) * ((tanz) * (- dz1) + (- tanr) * (dr1 + tern(r > SMALL, value1/r, dr1))) - 0.5 * (- tanr) * ((- dz1)*(- dz1) + (dr1 + tern(r > SMALL, value1/r, dr1))*(dr1 + tern(r > SMALL, value1/r, dr1)))), 0.0)" planar="tern(SMALL > fabs(ma_mur - 1.0), - 2.0 / (MU0 * ma_mur) * (dx1 * (tany * (-dy1) + (-tanx) * dx1) - 0.5 * (-tanx) * (dy1*dy1 + dx1*dx1)), 0.0)"/>
        <module:expression analysistype="transient" axi="tern(SMALL > fabs(ma_mur - 1.0), - 4.0 * PI * r / (MU0 * ma_mur) * ((dr1 + tern(r > SMALL, value1/r, dr1)) * ((tanz) * (- dz1) + (- tanr) * (dr1 + tern(r > SMALL, value1/r, dr1))) - 0.5 * (- tanr) * ((- dz1)*(- dz1) + (dr1 + tern(r > SMALL, value1/r, dr1))*(dr1 + tern(r > SMALL, value1/r, dr1)))), 0.0)" planar="tern(SMALL > fabs(ma_mur - 1.0), - 2.0 / (MU0 * ma_mur) * (dx1 * (tany * (-dy1) + (-tanx) * dx1) - 0.5 * (-tanx) * (dy1*dy1 + dx1*dx1)), 0.0)"/>
      </module:surfaceintegral>
    </module:surfaceintegrals>
    <module:force>
      <module:expression analysistype="steadystate" axi_phi="velz * dz1 + velr * (dr1 + tern(r > SMALL, value1/r, dr1))" axi_r="- velphi * (r * dr1 + value1)" axi_z="- velphi * r * (dz1)" planar_x="- velz * (-dx1)" planar_y="velz * dy1" planar_z="velx * (-dx1) - vely * dy1"/>
    </module:force>
  </module:postprocessor>

</module:module>
